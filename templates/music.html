{% extends "base.html" %}

{% block title %}Music{% endblock %}

{% block music_active %}active{% endblock %}

{% block content %}
<link rel='stylesheet'
  href='https://michael-zhigulin.github.io/mz-codepen-projects/Material%20Design%20UI%20Audio%20Player/font/font.css'>
<link rel="stylesheet" href="/statics/css/audioplayer.css">

<div class="container">
  <div class="player">
    <div class="like waves-effect waves-light">
      <i class="icon-heart"></i>
    </div>
    <div class="mask"></div>
    <ul class="player-info info-one">
      <li>{{music_name}}</li>
      <li>{{musician}}</li>
      <li id="info-one-duration">undefined</li>
    </ul>
    <ul class="player-info info-two">
      <li>{{music_name}}</li>
      <li>{{musician}}</li>
      <li><span id="duration"></span><i> / </i><span id="info-two-duration">undefined</span></li>
    </ul>
    <div id="play-button" class="unchecked">
      <i class="icon icon-play"></i>
    </div>
    <div class="control-row">
      <div class="waves-animation-one"></div>
      <div class="waves-animation-two"></div>
      <div id="pause-button">
        <i class="icon"></i>
      </div>
      <div class="seek-field">
        <input id="audioSeekBar" min="0" max="228" step="1" value="0" type="range" oninput="audioSeekBar()"
          onchange="this.oninput()">
      </div>
      <div class="volume-icon">
        <i class="icon-volume-up"></i>
      </div>
      <div class="volume-field">
        <input type="range" min="0" max="100" value="100" step="1" oninput="audio.volume = this.value/100"
          onchange="this.oninput()">
      </div>
    </div>
  </div>
</div>
<audio id="audio-player" onloadedmetadata="LoadMetadata()" ontimeupdate="SeekBar()" ondurationchange="CreateSeekBar()" preload="auto">
  <source src={{ music_path }} type="audio/mpeg">
</audio>
<!-- partial -->
<script src='https://code.jquery.com/jquery-2.1.1.min.js'></script>
<script src='https://cdnjs.cloudflare.com/ajax/libs/node-waves/0.7.5/waves.min.js'></script>
<script src="/statics/js/audioplayer.js"></script>
<script>
  function LoadMetadata() {
    audio_player = document.getElementById("audio-player");
    duration = audio_player.duration;
    document.getElementById("audioSeekBar").max = String(Math.floor(duration));
    duration = String(Math.floor(duration / 60)) + ":" + String(Math.floor(duration % 60));
    document.getElementById("info-one-duration").innerHTML = duration;
    document.getElementById("info-two-duration").innerHTML = duration;
  }
</script>
{% endblock %}